---
layout: post
title: "对象拷贝"
date: 2014-06-21 
description: "对象拷贝"
tag: maven 
---   



##  Java 深拷贝和浅拷贝

### 1. 简介
        对象拷贝(Object Copy)就是将一个对象的属性拷贝到另一个有着相同的类型的对象中去.Java对象拷贝对象三种类型:浅拷贝(Shallow-Copy)、深度拷贝(Deep-Copy) 、 延迟拷贝(Lazy-Copy).
    
### 2. 浅拷贝
    1. 什么是浅拷贝
        浅拷贝是按拷贝对象，它会创建一个新对象，这个对象有者原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝就是基本类型的值；如果属性是内存地址(引用类型),拷贝的就是内存地址,因为如果其中一个对象改变了这个地址，就会影响到另一个对象.
    2. 实现?
        实现java.lang.Cloneable接口.

### 3. 深度拷贝
       深拷贝会拷贝所有的属性,并拷贝属性指向的动态分配的内存。当对象和它所引用的对象一起拷贝时即发生深拷贝。深拷贝相比于浅拷贝速度较慢并且花销较大。
       可以利用反射实现.
### 4. 延迟拷贝
     延迟拷贝是浅拷贝和深拷贝的一个组合，实际上很少会使用。 当最开始拷贝一个对象时，会使用速度较快的浅拷贝，还会使用一个计数器来记录有多少对象共享这个数据。当程序想要修改原始的对象时，它会决定数据是否被共享（通过检查计数器）并根据需要进行深拷贝。 
    延迟拷贝从外面看起来就是深拷贝，但是只要有可能它就会利用浅拷贝的速度。当原始对象中的引用不经常改变的时候可以使用延迟拷贝。由于存在计数器，效率下降很高，但只是常量级的开销。而且, 在某些情况下, 循环引用会导致一些问题。


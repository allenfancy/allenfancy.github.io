---
layout: post
title: "mysql-log详解"
date: 2018-05-01
description: "mysql中重要log"
tag: MySQL
---

## 1. 什么是redo log?
    1. WAL的全称：Write-Ahead Logging，关键点先写日志，再写磁盘.
        InnoDB的redo log是固定大小的;比如可以配置为一组4个文件，每个文件大小是1GB，那么redolog就可以记录4GB的操作，从头开始写，写到尾部就又回到开头循环写.
    2. 配置命令：
        innodb_log_file_size:指定redo日志大小，默认值48MB
        innodb_log_files_in_group:指定日志文件中redo日志文件数量.
    3. redo log具体格式如下:
        ![redolog格式](https://allenfancy.github.io/images/mysql/redolog.png)
        write pos是当前记录的位置，一边写一边后移，写到第3号文件末尾后就回到0号文件开头.checkpoint是当前要擦除的位置，也是往后推移并且循环，擦除记录前要把记录更新到数据文件.
        有了redo log Innodb 就可以保证即使数据库异常重启，之前提交的记录都不会丢失.
    4. redo log大小怎么设置？
        redolog文件大小的设置对于InnoDB的存储引擎的性能有着非常大的影响.
